(()=>{"use strict";const e=function(e){let t={},n=0;return Object.defineProperties(t,{symb:{get:()=>e,set:t=>{e=t},enumerable:!0,configurable:!0},score:{get:()=>n,enumerable:!0,configurable:!0},incScore:{value:()=>{n++},enumerable:!0,writable:!1,configurable:!1}}),t},t=function(){let t,n,r=0;const o=u(3,2,3),c=u(3,2,3),i=u(2,1,3),l=u(2,1,3),s=[];function u(e,t,n){let r=[];for(;e--;)r.push(n);return 2===t?[u(r.length,1,n),r]:r}function a(e,t){let n=3;for(;n--;)s[n]=e,e=t(e)}return o.dim=c.dim=2,i.dim=l.dim=1,{currentPlayResult:function(e,t){return o[n][e]--,c[n][t]--,e===t&&i[n]--,e+t===2&&l[n]--,function(e,t){let r=!(o[n][e]&&c[n][t]&&i[n]&&l[n]);if(r)switch(!0){case!o[n][e]:a(3*e,(e=>e+1));break;case!c[n][t]:a(t,(e=>e+3));break;case!i[n]:a(0,(e=>e+4));break;case!l[n]:a(2,(e=>e+2))}return r}(e,t)},switchPlayer:function(){n=1-n},getCurrentPlayer:function(){return n},incTotalMoves:function(){return r++,9===r},getPlayers:function(){return t},endGame:function(e){e&&t[n].incScore(),r=0,function(){let e=3;for(;e--;)o[0][e]=o[1][e]=3,c[0][e]=c[1][e]=3;i[0]=i[1]=l[0]=l[1]=3}()},createPlayers:function(){let r=" ",o=["X","O"],c=0;for(;r&&!o.includes(r=prompt("Select X or O","X")););return!!r&&(c=o.indexOf(r),t?r&&r!==t[0].symb&&function(){let e=t[0].symb;t[0].symb=t[1].symb,t[1].symb=e}():t=[e(o[c]),e(o[1-c])],n="X"===t[0].symb?0:1,!0)},setGridWinEntries:a,getGridWinEntries:function(){return s}}}();!function(){const e=[document.querySelector(".player0"),document.querySelector(".player1")],n=document.querySelector(".grid-container"),r=document.querySelectorAll(".grid-item"),o=document.querySelector("button"),c=[];function i(){o.addEventListener("click",l)}function l(){let i,u,a=2;if(t.createPlayers()){for(o.removeEventListener("click",l),r.forEach((e=>{e.textContent=""}));a--;)i=e[a],u=t.getPlayers()[a],i.querySelector("h2").textContent=`Player${u.symb}`,i.querySelector(".score").textContent=`Score: ${u.score}`,i.querySelector(".winner").textContent="";3===c.length&&c.forEach((e=>{e.classList.toggle("win-emphasis")})),n.addEventListener("click",s,!1)}}function s(o){if("grid-container"!==o.target.className&&!o.target.textContent){let l,u,a=o.target.dataset.boardIndex,f=t.getCurrentPlayer();o.target.textContent=t.getPlayers()[f].symb,l=t.currentPlayResult(Math.floor(a/3),Math.floor(a%3)),u=t.incTotalMoves(),(l||u)&&(n.removeEventListener("click",s),t.endGame(l||!u),function(n,r){let o=n?"Win":"Draw";e[r].querySelector(".score").textContent=`Score: ${t.getPlayers()[r].score}`,e[r].querySelector(".winner").textContent=o,e[1-r].querySelector(".winner").textContent=n?"Lose":o}(l,f),l?function(){let e,n=Array.from(r),o=t.getGridWinEntries(),i=0;for(let t=0;t<n.length;t++)e=n[t],o.includes(parseInt(e.dataset.boardIndex))&&(e.classList.toggle("win-emphasis"),c[i++]=e)}():c.length>0&&c.pop(),i()),t.switchPlayer()}}i()}()})();